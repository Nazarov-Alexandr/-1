МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ РОССИЙСКОЙ ФЕДЕРАЦИИ

Федеральное государственное образовательное учреждение высшего образования «Санкт-петербургский государственный морской      технический университет»

ФАКУЛЬТЕТ ЦИФРОВЫХ ПРОМЫШЛЕННЫХ ТЕХНОЛОГИЙ

Кафедра Киберфизических систем



ЛАБОРАТОРНАЯ РАБОТА №1
По дисциплине «Программирование»



                                                                                                        Выполнил:
                                                                                                        Назаров А. И.
                                                                                                        Проверил:
                                                                                                        Поделенюк П. П.







Санкт-Петербург
2024
Цели работы:
1.	Даны N целых чисел Х1, Х2, … ХN. Требуется расставить между ними знаки + и – так,
чтобы значение получившегося выражения было равно заданному целому S.
2.	Вывести в файл полученное равенство с расставленными знаками, либо no solution, если не найдено решение.
3.	Если найдено несколько решений, то необходимо вывести любое решение, только через рекурсию.
Задачи работы:
1.	Работа с файлами
2.	Работа с несколькими функциями, а не только main
3.	Реализация рекурсивной функции
Ход работы:
1. Создаём текстовый файл input.txt, в котором вводим исходные данные.
2. Открываем созданный текстовый файл при помощи with open. Считываем его содержимое в отдельную переменную file.
3. В переменную inp считываем содержимое файла.
4. Разбиваем получившуюся строку на отдельные части.
5. Присваиваем значения из списка inp соответствующим переменным N, X, S.
6. Производим проверку, совпадает ли количество чисел Х с числом N.
 Если условие не выполнено, то выводим «Не корректные входные данные» и принудительно завершаем программу.
7. Если условие выполнено, запускаем функцию f, в которую поступают: последовательность чисел numbers,
конечный результат aim, текущая сумма current_summ, равная нулю,
и пустая строка result=’’ и записываем её результат в переменную с.
8. Проводим проверку на отсутствие чисел в последовательности.
9. Если условие выполнено, проводим проверку на равенство текущей суммы и конечного результата.
Если условие не выполнено, то возвращаем ’’No solution’’
10.Если условие выполнено, то возвращаем result + ’’=’’ + str(aim)
11. Запускаем рекурсию, в которую поступают: последовательность чисел без первого числа,
конечный результат, текущая сумма и строка результата с выбывшим числом со знаком «+» или «-»
и записываем её в переменные а и b соответственно.
12. Проводим проверку рекурсии на отсутствие ’’No solution’’
13. Если проверка пройдена, возвращаем а или b с правильным знаком рассматриваемого числа.
14. Проводим проверку на то, что переменная с начинается со знака «+»
15. Если условие выполняется, то делаем срез так, чтобы переменная с начиналась с числа.
16. Создаём текстовый файл output.txt
17. Записываем получившийся результат в созданный файл с помощью write (с)
Результаты работы:
Создана программа для решения задачи по заданному условию. Для проверки корректной работы программы зададим
 случайный набор целых чисел, удовлетворяющих условию задачи. В результате было получено:
3 2 3 4 3
2-3+4=3
Вывод:
Задание выполнено, цели работы достигнуты, программа работает корректно.









Листинг кода:
def f(numbers, aim, current_summ=0, result=''):
    if not numbers:
        # проверка на то, что были использованы все числа и дальнейшая проверка
        # на соответствие получившегося результата с целью
        if current_summ == aim:
            return result + "=" + str(aim)
        else:
            return "No solution"
    a = f(numbers[1:], aim, current_summ + numbers[0], f"{result}+{numbers[0]}")  # запуск рекурсии с числом, которое имеет положительный знак
    if a != "No solution":
        # выбор наиболее подходящего варианта числа с положительным знаком
        return a
    b = f(numbers[1:], aim, current_summ - numbers[0], f"{result}-{numbers[0]}")  # запуск рекурсии с числом, которое имеет отрицательный знак
    if b != "No solution":
        # выбор наиболее подходящего варианта числа с отрицательным знаком
        return b
    return "No solution"


if __name__ == "__main__":
    with open("input.txt") as file:
        inp = file.read()
    inp = list(map(int, inp.split()))  # занесение чисел в отдельный список
    N = inp[0]  # количество чисел
    x = inp[1:-1]  # заданные числа
    S = inp[-1]  # ожидаемый результат
    print(N, x, S)
    if N == len(x):
        # поиск решения
        c = f(x, S)
        if c[0] == "+":
            # если выражение начинается со знака "+", то его необходимо убрать
            c = c[1:]
            print(c)
        with open("output.txt", "w") as file:
            inp = file.write(c)  # запись в файл результата
    else:
        print("Не корректные входные данные")
        exit(1)

